@inherits LayoutComponentBase
@using frontend.Shared

@inject AuthState Auth
@inject NavigationManager Nav

<PageTitle>MarketGrowth</PageTitle>

<div class="mg-app">

    <!-- NAVBAR -->
    <header class="mg-navbar">

        <!-- Vänster: Logo -->
        <a href="/" class="mg-navbar-left mg-logo-link">
            <span class="mg-logo-mark">$</span>
            <span class="mg-logo-text">MarketGrowth</span>
        </a>

        <!-- Mitten: Meny -->
        <nav class="mg-navbar-center">
            <a href="/marketdata" class="mg-nav-link">Trading</a>
            <a href="/marketdata" class="mg-nav-link">Markets</a>
            <a href="/learn" class="mg-nav-link">Learn</a>
            <a href="/about" class="mg-nav-link">About</a>
        </nav>

        <!-- Höger: Login / Logout -->
        <div class="mg-navbar-right">
            @if (Auth.IsLoggedIn)
            {
                <button class="mg-btn mg-btn-outline mg-nav-login"
                        @onclick="Logout">
                    Log out @Auth.UserId
                </button>
            }
            else
            {
                <a href="/authentication" class="mg-btn mg-btn-outline mg-nav-login">
                    Log in
                </a>
            }
        </div>

    </header>

    <!-- SIDINNEHÅLL -->
    <main class="mg-main">
        @Body
    </main>

</div>

@code {
    private async Task Logout()
    {
        await Auth.LogoutAsync();
        Nav.NavigateTo("/");
    }
}
